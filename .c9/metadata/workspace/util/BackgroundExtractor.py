{"filter":false,"title":"BackgroundExtractor.py","tooltip":"/util/BackgroundExtractor.py","undoManager":{"mark":18,"position":18,"stack":[[{"start":{"row":54,"column":2},"end":{"row":55,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":55,"column":0},"end":{"row":55,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":55,"column":1},"end":{"row":55,"column":2},"action":"remove","lines":[" "],"id":3}],[{"start":{"row":55,"column":0},"end":{"row":55,"column":1},"action":"remove","lines":[" "],"id":4}],[{"start":{"row":55,"column":0},"end":{"row":56,"column":0},"action":"insert","lines":["",""],"id":5}],[{"start":{"row":55,"column":0},"end":{"row":78,"column":38},"action":"insert","lines":["class BackgroundExtractor(object):","","    def __init__(self, filename):","        self.vc = cv2.VideoCapture(filename)","        self.frames = int(self.vc.get(cv2.CAP_PROP_FRAME_COUNT))","        self.width = int(self.vc.get(cv2.CAP_PROP_FRAME_WIDTH))","        self.height = int(self.vc.get(cv2.CAP_PROP_FRAME_HEIGHT))","        ","    def extract(self, verbose=False):  ","        ret, frame = self.vc.read()","        bg = np.float32(frame)","        f = 1","        while(True):","            ret, frame = self.vc.read()","            a = 1 / self.frames","            if not ret:","                break;","            if f is 1:","                bg = np.float32(frame)","            else:","                cv2.accumulateWeighted(frame, bg, a)","            ","            f += 1","        return cv2.convertScaleAbs(bg)"],"id":6}],[{"start":{"row":55,"column":6},"end":{"row":55,"column":16},"action":"remove","lines":["Background"],"id":7},{"start":{"row":55,"column":6},"end":{"row":55,"column":7},"action":"insert","lines":["C"]}],[{"start":{"row":55,"column":7},"end":{"row":55,"column":8},"action":"insert","lines":["V"],"id":8}],[{"start":{"row":61,"column":65},"end":{"row":62,"column":0},"action":"insert","lines":["",""],"id":9},{"start":{"row":62,"column":0},"end":{"row":62,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":62,"column":8},"end":{"row":62,"column":50},"action":"insert","lines":["fgbg = cv2.createBackgroundSubtractorMOG()"],"id":10}],[{"start":{"row":62,"column":8},"end":{"row":62,"column":9},"action":"insert","lines":["s"],"id":11}],[{"start":{"row":62,"column":9},"end":{"row":62,"column":10},"action":"insert","lines":["e"],"id":12}],[{"start":{"row":62,"column":10},"end":{"row":62,"column":11},"action":"insert","lines":["l"],"id":13}],[{"start":{"row":62,"column":11},"end":{"row":62,"column":12},"action":"insert","lines":["f"],"id":14}],[{"start":{"row":62,"column":12},"end":{"row":62,"column":13},"action":"insert","lines":["."],"id":15}],[{"start":{"row":69,"column":39},"end":{"row":70,"column":0},"action":"insert","lines":["",""],"id":16},{"start":{"row":70,"column":0},"end":{"row":70,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":70,"column":12},"end":{"row":70,"column":38},"action":"insert","lines":["fgmask = fgbg.apply(frame)"],"id":17}],[{"start":{"row":71,"column":12},"end":{"row":77,"column":52},"action":"remove","lines":["a = 1 / self.frames","            if not ret:","                break;","            if f is 1:","                bg = np.float32(frame)","            else:","                cv2.accumulateWeighted(frame, bg, a)"],"id":18}],[{"start":{"row":55,"column":0},"end":{"row":74,"column":38},"action":"remove","lines":["class CVExtractor(object):","","    def __init__(self, filename):","        self.vc = cv2.VideoCapture(filename)","        self.frames = int(self.vc.get(cv2.CAP_PROP_FRAME_COUNT))","        self.width = int(self.vc.get(cv2.CAP_PROP_FRAME_WIDTH))","        self.height = int(self.vc.get(cv2.CAP_PROP_FRAME_HEIGHT))","        self.fgbg = cv2.createBackgroundSubtractorMOG()","        ","    def extract(self, verbose=False):  ","        ret, frame = self.vc.read()","        bg = np.float32(frame)","        f = 1","        while(True):","            ret, frame = self.vc.read()","            fgmask = fgbg.apply(frame)","            ","            ","            f += 1","        return cv2.convertScaleAbs(bg)"],"id":19}],[{"start":{"row":54,"column":2},"end":{"row":55,"column":0},"action":"remove","lines":["",""],"id":20}]]},"ace":{"folds":[],"scrolltop":600,"scrollleft":0,"selection":{"start":{"row":56,"column":44},"end":{"row":56,"column":44},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1498772566359,"hash":"d8ca17dadce4ea973728347d6ab68b85b96100c0"}