{"filter":false,"title":"Query.py","tooltip":"/util/Query.py","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":147,"column":19},"end":{"row":147,"column":20},"action":"insert","lines":["t"],"id":977}],[{"start":{"row":147,"column":20},"end":{"row":147,"column":21},"action":"insert","lines":["e"],"id":978}],[{"start":{"row":147,"column":21},"end":{"row":147,"column":23},"action":"insert","lines":["()"],"id":979},{"start":{"row":147,"column":22},"end":{"row":147,"column":23},"action":"insert","lines":["*"]}],[{"start":{"row":147,"column":22},"end":{"row":147,"column":23},"action":"remove","lines":["*"],"id":980}],[{"start":{"row":147,"column":22},"end":{"row":147,"column":23},"action":"remove","lines":[")"],"id":981}],[{"start":{"row":147,"column":22},"end":{"row":147,"column":135},"action":"insert","lines":["\"SELECT \" + fields + \" FROM assoc LEFT JOIN particles ON assoc.particle = particles.id WHERE frame = ?\", (frame,)"],"id":982}],[{"start":{"row":147,"column":55},"end":{"row":147,"column":56},"action":"insert","lines":[","],"id":983}],[{"start":{"row":147,"column":56},"end":{"row":147,"column":57},"action":"insert","lines":[" "],"id":984}],[{"start":{"row":147,"column":57},"end":{"row":147,"column":58},"action":"insert","lines":["p"],"id":985}],[{"start":{"row":147,"column":58},"end":{"row":147,"column":59},"action":"insert","lines":["a"],"id":986}],[{"start":{"row":147,"column":59},"end":{"row":147,"column":60},"action":"insert","lines":["r"],"id":987}],[{"start":{"row":147,"column":60},"end":{"row":147,"column":61},"action":"insert","lines":["t"],"id":988}],[{"start":{"row":147,"column":61},"end":{"row":147,"column":62},"action":"insert","lines":["i"],"id":989}],[{"start":{"row":147,"column":62},"end":{"row":147,"column":63},"action":"insert","lines":["c"],"id":990}],[{"start":{"row":147,"column":63},"end":{"row":147,"column":64},"action":"insert","lines":["l"],"id":991}],[{"start":{"row":147,"column":64},"end":{"row":147,"column":65},"action":"insert","lines":["e"],"id":992}],[{"start":{"row":147,"column":65},"end":{"row":147,"column":66},"action":"insert","lines":["s"],"id":993}],[{"start":{"row":147,"column":67},"end":{"row":147,"column":90},"action":"remove","lines":["LEFT JOIN particles ON "],"id":994}],[{"start":{"row":147,"column":67},"end":{"row":147,"column":96},"action":"remove","lines":["assoc.particle = particles.id"],"id":995}],[{"start":{"row":147,"column":66},"end":{"row":147,"column":67},"action":"remove","lines":[" "],"id":996}],[{"start":{"row":147,"column":72},"end":{"row":147,"column":73},"action":"insert","lines":[" "],"id":997}],[{"start":{"row":147,"column":73},"end":{"row":147,"column":102},"action":"insert","lines":["assoc.particle = particles.id"],"id":998}],[{"start":{"row":147,"column":102},"end":{"row":147,"column":103},"action":"insert","lines":[" "],"id":999}],[{"start":{"row":147,"column":103},"end":{"row":147,"column":104},"action":"insert","lines":["a"],"id":1000}],[{"start":{"row":147,"column":104},"end":{"row":147,"column":105},"action":"insert","lines":["b"],"id":1001}],[{"start":{"row":147,"column":105},"end":{"row":147,"column":106},"action":"insert","lines":["n"],"id":1002}],[{"start":{"row":147,"column":106},"end":{"row":147,"column":107},"action":"insert","lines":["d"],"id":1003}],[{"start":{"row":147,"column":106},"end":{"row":147,"column":107},"action":"remove","lines":["d"],"id":1004}],[{"start":{"row":147,"column":105},"end":{"row":147,"column":106},"action":"remove","lines":["n"],"id":1005}],[{"start":{"row":147,"column":104},"end":{"row":147,"column":105},"action":"remove","lines":["b"],"id":1006}],[{"start":{"row":147,"column":104},"end":{"row":147,"column":105},"action":"insert","lines":["n"],"id":1007}],[{"start":{"row":147,"column":105},"end":{"row":147,"column":106},"action":"insert","lines":["d"],"id":1008}],[{"start":{"row":147,"column":127},"end":{"row":147,"column":128},"action":"insert","lines":[")"],"id":1009}],[{"start":{"row":267,"column":0},"end":{"row":268,"column":0},"action":"insert","lines":["",""],"id":1010}],[{"start":{"row":268,"column":0},"end":{"row":268,"column":4},"action":"insert","lines":["    "],"id":1011}],[{"start":{"row":268,"column":4},"end":{"row":268,"column":5},"action":"insert","lines":["d"],"id":1012}],[{"start":{"row":268,"column":5},"end":{"row":268,"column":6},"action":"insert","lines":["e"],"id":1013}],[{"start":{"row":268,"column":6},"end":{"row":268,"column":7},"action":"insert","lines":["f"],"id":1014}],[{"start":{"row":268,"column":7},"end":{"row":268,"column":8},"action":"insert","lines":[" "],"id":1015}],[{"start":{"row":268,"column":8},"end":{"row":268,"column":27},"action":"insert","lines":["compare_flow_violin"],"id":1017}],[{"start":{"row":268,"column":27},"end":{"row":268,"column":29},"action":"insert","lines":["()"],"id":1018}],[{"start":{"row":268,"column":28},"end":{"row":268,"column":29},"action":"insert","lines":["s"],"id":1019}],[{"start":{"row":268,"column":29},"end":{"row":268,"column":30},"action":"insert","lines":["e"],"id":1020}],[{"start":{"row":268,"column":30},"end":{"row":268,"column":31},"action":"insert","lines":["l"],"id":1021}],[{"start":{"row":268,"column":31},"end":{"row":268,"column":32},"action":"insert","lines":["f"],"id":1022}],[{"start":{"row":268,"column":33},"end":{"row":268,"column":34},"action":"insert","lines":[":"],"id":1023}],[{"start":{"row":268,"column":34},"end":{"row":269,"column":0},"action":"insert","lines":["",""],"id":1024},{"start":{"row":269,"column":0},"end":{"row":269,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":268,"column":34},"end":{"row":269,"column":0},"action":"insert","lines":["",""],"id":1025},{"start":{"row":269,"column":0},"end":{"row":269,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":269,"column":8},"end":{"row":316,"column":90},"action":"insert","lines":["        cat0 = self.bag.query('select AVG(-(a2.y-a1.y)*p.area) from assoc a1, assoc a2, particles p where category = 0 and p.id==a1.particle and a1.particle==a2.particle and a1.frame == a2.frame - 1 GROUP BY p.id')","        cat1 = self.bag.query('select AVG(-(a2.y-a1.y)*p.area) from assoc a1, assoc a2, particles p where category = 1 and p.id==a1.particle and a1.particle==a2.particle and a1.frame == a2.frame - 1 GROUP BY p.id')","        cat2 = self.bag.query('select AVG(-(a2.y-a1.y)*p.area) from assoc a1, assoc a2, particles p where category = 2 and p.id==a1.particle and a1.particle==a2.particle and a1.frame == a2.frame - 1 GROUP BY p.id')","        cat3 = self.bag.query('select AVG(-(a2.y-a1.y)*p.area) from assoc a1, assoc a2, particles p where category = 3 and p.id==a1.particle and a1.particle==a2.particle and a1.frame == a2.frame - 1 GROUP BY p.id')","        cat4 = self.bag.query('select AVG(-(a2.y-a1.y)*p.area) from assoc a1, assoc a2, particles p where category = 4 and p.id==a1.particle and a1.particle==a2.particle and a1.frame == a2.frame - 1 GROUP BY p.id')","        ","        cat0 = np.array([i[0] for i in cat0])","        cat1 = np.array([i[0] for i in cat1])","        cat2 = np.array([i[0] for i in cat2])","        cat3 = np.array([i[0] for i in cat3])","        cat4 = np.array([i[0] for i in cat4])","        \"\"\"","        if len(cat0):","            q75, q25 = np.percentile(cat0, [75 ,25])                         ","            iqr = q75 - q25","            lb = q25 - 3.0 * iqr","            ub = q75 + 3.0 * iqr","            cat0 = cat0[(cat0<ub) & (cat0>lb)]","        ","        if len(cat1):","            q75, q25 = np.percentile(cat1, [75 ,25])                         ","            iqr = q75 - q25","            lb = q25 - 3.0 * iqr","            ub = q75 + 3.0 * iqr","            cat1 = cat1[(cat1<ub) & (cat1>lb)]","        ","        if len(cat2):","            q75, q25 = np.percentile(cat2, [75 ,25])                         ","            iqr = q75 - q25","            lb = q25 - 3.0 * iqr","            ub = q75 + 3.0 * iqr","            cat2 = cat2[(cat2<ub) & (cat2>lb)]","        ","        if len(cat3):","            q75, q25 = np.percentile(cat3, [75 ,25])                         ","            iqr = q75 - q25","            lb = q25 - 3.0 * iqr","            ub = q75 + 3.0 * iqr","            cat3 = cat3[(cat3<ub) & (cat3>lb)]","        ","        if len(cat4):","            q75, q25 = np.percentile(cat4, [75 ,25])                         ","            iqr = q75 - q25","            lb = q25 - 3.0 * iqr","            ub = q75 + 3.0 * iqr","            cat4 = cat4[(cat4<ub) & (cat4>lb)]","        \"\"\"","        return [cat0.tolist(), cat1.tolist(), cat2.tolist(), cat3.tolist(), cat4.tolist()]"],"id":1026}],[{"start":{"row":269,"column":0},"end":{"row":269,"column":4},"action":"remove","lines":["    "],"id":1027}],[{"start":{"row":269,"column":0},"end":{"row":269,"column":4},"action":"remove","lines":["    "],"id":1028}],[{"start":{"row":280,"column":0},"end":{"row":315,"column":11},"action":"remove","lines":["        \"\"\"","        if len(cat0):","            q75, q25 = np.percentile(cat0, [75 ,25])                         ","            iqr = q75 - q25","            lb = q25 - 3.0 * iqr","            ub = q75 + 3.0 * iqr","            cat0 = cat0[(cat0<ub) & (cat0>lb)]","        ","        if len(cat1):","            q75, q25 = np.percentile(cat1, [75 ,25])                         ","            iqr = q75 - q25","            lb = q25 - 3.0 * iqr","            ub = q75 + 3.0 * iqr","            cat1 = cat1[(cat1<ub) & (cat1>lb)]","        ","        if len(cat2):","            q75, q25 = np.percentile(cat2, [75 ,25])                         ","            iqr = q75 - q25","            lb = q25 - 3.0 * iqr","            ub = q75 + 3.0 * iqr","            cat2 = cat2[(cat2<ub) & (cat2>lb)]","        ","        if len(cat3):","            q75, q25 = np.percentile(cat3, [75 ,25])                         ","            iqr = q75 - q25","            lb = q25 - 3.0 * iqr","            ub = q75 + 3.0 * iqr","            cat3 = cat3[(cat3<ub) & (cat3>lb)]","        ","        if len(cat4):","            q75, q25 = np.percentile(cat4, [75 ,25])                         ","            iqr = q75 - q25","            lb = q25 - 3.0 * iqr","            ub = q75 + 3.0 * iqr","            cat4 = cat4[(cat4<ub) & (cat4>lb)]","        \"\"\""],"id":1029}],[{"start":{"row":279,"column":45},"end":{"row":280,"column":0},"action":"remove","lines":["",""],"id":1030}],[{"start":{"row":269,"column":8},"end":{"row":269,"column":12},"action":"remove","lines":["cat0"],"id":1031},{"start":{"row":269,"column":8},"end":{"row":269,"column":9},"action":"insert","lines":["b"]}],[{"start":{"row":269,"column":9},"end":{"row":269,"column":10},"action":"insert","lines":["i"],"id":1032}],[{"start":{"row":270,"column":8},"end":{"row":270,"column":12},"action":"remove","lines":["cat1"],"id":1033},{"start":{"row":270,"column":8},"end":{"row":270,"column":9},"action":"insert","lines":["s"]}],[{"start":{"row":270,"column":9},"end":{"row":270,"column":10},"action":"insert","lines":["a"],"id":1034}],[{"start":{"row":269,"column":10},"end":{"row":269,"column":11},"action":"insert","lines":["t"],"id":1035}],[{"start":{"row":270,"column":10},"end":{"row":270,"column":11},"action":"insert","lines":["n"],"id":1036}],[{"start":{"row":270,"column":11},"end":{"row":270,"column":12},"action":"insert","lines":["d"],"id":1037}],[{"start":{"row":269,"column":11},"end":{"row":269,"column":12},"action":"insert","lines":["u"],"id":1038}],[{"start":{"row":271,"column":8},"end":{"row":274,"column":8},"action":"remove","lines":["cat2 = self.bag.query('select AVG(-(a2.y-a1.y)*p.area) from assoc a1, assoc a2, particles p where category = 2 and p.id==a1.particle and a1.particle==a2.particle and a1.frame == a2.frame - 1 GROUP BY p.id')","        cat3 = self.bag.query('select AVG(-(a2.y-a1.y)*p.area) from assoc a1, assoc a2, particles p where category = 3 and p.id==a1.particle and a1.particle==a2.particle and a1.frame == a2.frame - 1 GROUP BY p.id')","        cat4 = self.bag.query('select AVG(-(a2.y-a1.y)*p.area) from assoc a1, assoc a2, particles p where category = 4 and p.id==a1.particle and a1.particle==a2.particle and a1.frame == a2.frame - 1 GROUP BY p.id')","        "],"id":1039}],[{"start":{"row":272,"column":8},"end":{"row":272,"column":12},"action":"remove","lines":["cat0"],"id":1040},{"start":{"row":272,"column":8},"end":{"row":272,"column":9},"action":"insert","lines":["b"]}],[{"start":{"row":272,"column":9},"end":{"row":272,"column":10},"action":"insert","lines":["i"],"id":1041}],[{"start":{"row":272,"column":10},"end":{"row":272,"column":11},"action":"insert","lines":["t"],"id":1042}],[{"start":{"row":272,"column":11},"end":{"row":272,"column":12},"action":"insert","lines":["u"],"id":1043}],[{"start":{"row":273,"column":8},"end":{"row":273,"column":12},"action":"remove","lines":["cat1"],"id":1044},{"start":{"row":273,"column":8},"end":{"row":273,"column":9},"action":"insert","lines":["s"]}],[{"start":{"row":273,"column":9},"end":{"row":273,"column":10},"action":"insert","lines":["a"],"id":1045}],[{"start":{"row":273,"column":10},"end":{"row":273,"column":11},"action":"insert","lines":["n"],"id":1046}],[{"start":{"row":273,"column":11},"end":{"row":273,"column":12},"action":"insert","lines":["d"],"id":1047}],[{"start":{"row":274,"column":8},"end":{"row":276,"column":45},"action":"remove","lines":["cat2 = np.array([i[0] for i in cat2])","        cat3 = np.array([i[0] for i in cat3])","        cat4 = np.array([i[0] for i in cat4])"],"id":1048}],[{"start":{"row":269,"column":117},"end":{"row":269,"column":118},"action":"remove","lines":["0"],"id":1049}],[{"start":{"row":269,"column":117},"end":{"row":269,"column":118},"action":"insert","lines":["2"],"id":1050}],[{"start":{"row":270,"column":117},"end":{"row":270,"column":118},"action":"remove","lines":["1"],"id":1051}],[{"start":{"row":270,"column":117},"end":{"row":270,"column":118},"action":"insert","lines":["3"],"id":1052}],[{"start":{"row":275,"column":16},"end":{"row":275,"column":20},"action":"remove","lines":["cat0"],"id":1053},{"start":{"row":275,"column":16},"end":{"row":275,"column":17},"action":"insert","lines":["b"]}],[{"start":{"row":275,"column":17},"end":{"row":275,"column":18},"action":"insert","lines":["i"],"id":1054}],[{"start":{"row":275,"column":18},"end":{"row":275,"column":19},"action":"insert","lines":["t"],"id":1055}],[{"start":{"row":275,"column":19},"end":{"row":275,"column":20},"action":"insert","lines":["u"],"id":1056}],[{"start":{"row":275,"column":31},"end":{"row":275,"column":35},"action":"remove","lines":["cat1"],"id":1057},{"start":{"row":275,"column":31},"end":{"row":275,"column":32},"action":"insert","lines":["s"]}],[{"start":{"row":275,"column":32},"end":{"row":275,"column":33},"action":"insert","lines":["a"],"id":1058}],[{"start":{"row":275,"column":33},"end":{"row":275,"column":34},"action":"insert","lines":["n"],"id":1059}],[{"start":{"row":275,"column":34},"end":{"row":275,"column":35},"action":"insert","lines":["d"],"id":1060}],[{"start":{"row":275,"column":44},"end":{"row":275,"column":89},"action":"remove","lines":[", cat2.tolist(), cat3.tolist(), cat4.tolist()"],"id":1061}],[{"start":{"row":271,"column":0},"end":{"row":271,"column":8},"action":"remove","lines":["        "],"id":1062}],[{"start":{"row":270,"column":214},"end":{"row":271,"column":0},"action":"remove","lines":["",""],"id":1063}],[{"start":{"row":273,"column":0},"end":{"row":273,"column":8},"action":"remove","lines":["        "],"id":1064}],[{"start":{"row":272,"column":45},"end":{"row":273,"column":0},"action":"remove","lines":["",""],"id":1065}],[{"start":{"row":271,"column":39},"end":{"row":271,"column":43},"action":"remove","lines":["cat0"],"id":1066},{"start":{"row":271,"column":39},"end":{"row":271,"column":40},"action":"insert","lines":["b"]}],[{"start":{"row":271,"column":40},"end":{"row":271,"column":41},"action":"insert","lines":["i"],"id":1067}],[{"start":{"row":271,"column":41},"end":{"row":271,"column":42},"action":"insert","lines":["t"],"id":1068}],[{"start":{"row":271,"column":42},"end":{"row":271,"column":43},"action":"insert","lines":["u"],"id":1069}],[{"start":{"row":272,"column":39},"end":{"row":272,"column":43},"action":"remove","lines":["cat1"],"id":1070},{"start":{"row":272,"column":39},"end":{"row":272,"column":40},"action":"insert","lines":["s"]}],[{"start":{"row":272,"column":40},"end":{"row":272,"column":41},"action":"insert","lines":["a"],"id":1071}],[{"start":{"row":272,"column":41},"end":{"row":272,"column":42},"action":"insert","lines":["n"],"id":1072},{"start":{"row":272,"column":42},"end":{"row":272,"column":43},"action":"insert","lines":["b"]}],[{"start":{"row":272,"column":43},"end":{"row":272,"column":44},"action":"insert","lines":["d"],"id":1073}],[{"start":{"row":272,"column":43},"end":{"row":272,"column":44},"action":"remove","lines":["d"],"id":1074}],[{"start":{"row":272,"column":42},"end":{"row":272,"column":43},"action":"remove","lines":["b"],"id":1075}],[{"start":{"row":272,"column":42},"end":{"row":272,"column":43},"action":"insert","lines":["d"],"id":1076}],[{"start":{"row":268,"column":27},"end":{"row":268,"column":28},"action":"insert","lines":["2"],"id":1077}],[{"start":{"row":268,"column":8},"end":{"row":268,"column":28},"action":"remove","lines":["compare_flow_violin2"],"id":1078},{"start":{"row":268,"column":8},"end":{"row":268,"column":40},"action":"insert","lines":["compare_flow_vs_category_violin2"]}]]},"ace":{"folds":[{"start":{"row":60,"column":25},"end":{"row":67,"column":23},"placeholder":"..."},{"start":{"row":70,"column":21},"end":{"row":75,"column":32},"placeholder":"..."},{"start":{"row":77,"column":21},"end":{"row":81,"column":32},"placeholder":"..."},{"start":{"row":84,"column":27},"end":{"row":100,"column":18},"placeholder":"..."},{"start":{"row":103,"column":31},"end":{"row":105,"column":44},"placeholder":"..."},{"start":{"row":120,"column":25},"end":{"row":124,"column":50},"placeholder":"..."},{"start":{"row":126,"column":28},"end":{"row":130,"column":50},"placeholder":"..."},{"start":{"row":138,"column":25},"end":{"row":139,"column":49},"placeholder":"..."},{"start":{"row":140,"column":13},"end":{"row":141,"column":23},"placeholder":"..."},{"start":{"row":154,"column":43},"end":{"row":158,"column":50},"placeholder":"..."},{"start":{"row":160,"column":40},"end":{"row":164,"column":50},"placeholder":"..."},{"start":{"row":166,"column":44},"end":{"row":168,"column":40},"placeholder":"..."},{"start":{"row":170,"column":47},"end":{"row":171,"column":66},"placeholder":"..."},{"start":{"row":173,"column":39},"end":{"row":179,"column":19},"placeholder":"..."},{"start":{"row":182,"column":59},"end":{"row":203,"column":45},"placeholder":"..."},{"start":{"row":205,"column":62},"end":{"row":206,"column":58},"placeholder":"..."},{"start":{"row":208,"column":56},"end":{"row":209,"column":58},"placeholder":"..."},{"start":{"row":212,"column":41},"end":{"row":260,"column":90},"placeholder":"..."},{"start":{"row":262,"column":44},"end":{"row":263,"column":48},"placeholder":"..."},{"start":{"row":265,"column":38},"end":{"row":266,"column":48},"placeholder":"..."},{"start":{"row":286,"column":101},"end":{"row":291,"column":50},"placeholder":"..."},{"start":{"row":293,"column":27},"end":{"row":302,"column":22},"placeholder":"..."},{"start":{"row":305,"column":31},"end":{"row":321,"column":27},"placeholder":"..."},{"start":{"row":324,"column":34},"end":{"row":326,"column":42},"placeholder":"..."},{"start":{"row":330,"column":19},"end":{"row":336,"column":17},"placeholder":"..."}],"scrolltop":1860,"scrollleft":0,"selection":{"start":{"row":280,"column":61},"end":{"row":280,"column":61},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1503961627216,"hash":"44591e2f2efc10ce895047acfdb8b9cd63f7eae8"}